<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Gest√£o de Peladas</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/png" href="/favicon-48x48.png" sizes="48x48" />
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    
    <!-- Favicon Display CSS -->
    <link rel="stylesheet" href="../css/favicon-display.css">
    
    <!-- CSS principal -->
    <link rel="stylesheet" href="../css/admin-peladas.css">
    <!-- CSS para modo noturno -->
    <link rel="stylesheet" href="../css/dark-mode-colors.css">
    <link rel="stylesheet" href="../css/components.css">
</head>
<body>
    <!-- Bot√£o de altern√¢ncia de modo noturno -->
    <button id="toggle-dark-mode" class="dark-toggle-button" title="Alternar modo claro/escuro"></button>
    
    <!-- Bot√£o de voltar para p√°gina inicial -->
    <button id="back-to-home" class="back-to-home-button" title="Voltar para p√°gina inicial">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
    </button>


    <div class="container">
        <header class="header">
            <h1>‚öΩ ADMIN - GEST√ÉO DE PELADAS</h1>
            <div class="user-info">
                <span id="user-email"></span>
                <button id="logout-btn" class="btn-logout">üö™ Sair</button>
            </div>
        </header>

        <div class="main-content">
            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìÖ</div>
                    <h2 class="card-title">Preparar Nova Pelada</h2>
                </div>

                <form id="pelada-form">
                    <div class="form-group">
                        <label class="form-label" for="data-pelada">Data da Pelada:</label>
                        <input type="date" id="data-pelada" class="form-input" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="lista-jogadores">Lista de Jogadores (um por linha):</label>
                        <textarea id="lista-jogadores" class="form-input form-textarea players-input" 
                                  placeholder="Digite os nomes dos jogadores, um por linha:&#10;Jo√£o Silva&#10;Pedro Santos&#10;Carlos Oliveira&#10;..." required></textarea>
                        <div class="input-hint">Digite um nome por linha. O sistema processar√° automaticamente cada jogador.</div>
                        <div class="input-hint" style="color: #28a745; font-weight: 500; margin-top: 8px;">
                            üí° <strong>Novo:</strong> Jogadores n√£o cadastrados ser√£o automaticamente adicionados ao sistema (sem time)!
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" id="btn-preview" class="btn btn-primary">üëÅÔ∏è Visualizar Lista</button>
                    </div>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-icon">üìù</div>
                    <h2 class="card-title">Observa√ß√µes</h2>
                </div>

                <div class="form-group">
                    <label class="form-label" for="observacoes">Observa√ß√µes (opcional):</label>
                    <textarea id="observacoes" class="form-input form-textarea" 
                              placeholder="Observa√ß√µes sobre a pelada, local, hor√°rio, regras especiais, etc."></textarea>
                    <div class="input-hint">Adicione informa√ß√µes importantes sobre a pelada que os jogadores devem saber.</div>
                </div>
            </div>
        </div>

        <!-- Preview da lista processada -->
        <div id="preview-section" class="preview-section" style="display: none;">
            <h3>üìã Preview da Lista Processada</h3>
            <div id="preview-content" class="preview-content">
                <!-- Conte√∫do ser√° preenchido via JavaScript -->
            </div>
            <div class="preview-actions">
                <button id="btn-confirmar" class="btn btn-confirmar">‚úÖ Confirmar e Cadastrar</button>
                <button id="btn-editar" class="btn btn-editar-lista">‚úèÔ∏è Editar Lista</button>
            </div>
        </div>

        <div class="management-section">
            <div class="management-icon">üîß</div>
            <h2 class="management-title">Gerenciar Peladas Existentes</h2>
            <p class="management-desc">Visualize, edite e gerencie todas as peladas cadastradas no sistema.</p>
            <button class="btn btn-manage" onclick="abrirGerenciadorPeladas()">üîç Ver e Editar Peladas</button>
        </div>

        <div class="management-section">
            <div class="management-icon">‚úÖ</div>
            <h2 class="management-title">Gerenciar Jogadores Aptos</h2>
            <p class="management-desc">Marque jogadores como aptos manualmente, independente da √∫ltima participa√ß√£o.</p>
            <button class="btn btn-manage" onclick="abrirGerenciadorAptos()">üë• Gerenciar Aptos</button>
        </div>
    </div>

    <!-- Modal de confirma√ß√£o -->
    <div id="modal-confirmacao" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Confirma√ß√£o de Cadastro</h3>
            </div>
            <div class="modal-body">
                <p id="modal-message">Tem certeza que deseja cadastrar esta pelada?</p>
                <div id="modal-details"></div>
            </div>
            <div class="modal-footer">
                <button id="btn-cancelar" class="btn btn-secondary">‚ùå Cancelar</button>
                <button id="btn-confirmar-final" class="btn btn-primary">‚úÖ Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de sucesso -->
    <div id="modal-sucesso" class="modal">
        <div class="modal-content">
            <div class="modal-header success">
                <h3>üéâ Sucesso!</h3>
            </div>
            <div class="modal-body">
                <p id="sucesso-message">Pelada cadastrada com sucesso!</p>
            </div>
            <div class="modal-footer">
                <button id="btn-ok" class="btn btn-primary">üëç OK</button>
            </div>
        </div>
    </div>

    <!-- MODAL DO GERENCIADOR DE JOGADORES APTOS -->
    <div id="modal-aptos-overlay" class="gerenciador-modal-overlay" style="display: none;">
        <div id="modal-aptos-content" class="modal-gerenciador">
            <!-- Cabe√ßalho do Modal -->
            <div class="modal-header-gerenciador">
                <div class="modal-title">
                    <div class="modal-icon">‚úÖ</div>
                    <span>Gerenciar Jogadores Aptos</span>
                </div>
                <button class="close-btn" onclick="fecharGerenciadorAptos()">
                    <span>√ó</span>
                </button>
            </div>

            <!-- Corpo do Modal -->
            <div class="modal-body-gerenciador">
                <!-- Filtro por Time -->
                <div class="filters-section">
                    <div class="filters-title">
                        <span>üèüÔ∏è</span>
                        <span>Selecione o Time</span>
                    </div>
                    <div class="filters-grid">
                        <div class="filter-group" style="grid-column: 1 / -1;">
                            <label class="filter-label">Time:</label>
                            <select id="filtro-time-aptos" class="filter-select" onchange="carregarJogadoresTime()">
                                <option value="">Selecione um time...</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Lista de Jogadores -->
                <div id="jogadores-aptos-container" class="peladas-list">
                    <div class="empty-state">
                        <div class="empty-icon">üëÜ</div>
                        <div class="empty-title">Selecione um time</div>
                        <div class="empty-text">
                            Escolha um time acima para visualizar e gerenciar os jogadores aptos.
                        </div>
                    </div>
                </div>

                <!-- Bot√£o de Salvar -->
                <div class="preview-actions" id="btn-salvar-aptos-container" style="display: none;">
                    <button id="btn-salvar-aptos" class="btn btn-confirmar">üíæ Salvar Altera√ß√µes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL DO GERENCIADOR DE PELADAS -->
    <div id="modal-gerenciador-overlay" class="gerenciador-modal-overlay" style="display: none;">
        <div id="modal-gerenciador-content" class="modal-gerenciador">
            <!-- Cabe√ßalho do Modal -->
            <div class="modal-header-gerenciador">
                <div class="modal-title">
                    <div class="modal-icon">‚öΩ</div>
                    <span>Gerenciador de Peladas</span>
                </div>
                <button class="close-btn" onclick="fecharGerenciadorPeladas()">
                    <span>√ó</span>
                </button>
            </div>

            <!-- Corpo do Modal -->
            <div class="modal-body-gerenciador">
                <!-- Se√ß√£o de Filtros -->
                <div class="filters-section">
                    <div class="filters-title">
                        <span>üîç</span>
                        <span>Filtros de Busca</span>
                    </div>
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label class="filter-label">Data In√≠cio:</label>
                            <input type="date" id="filtro-data-inicio" class="filter-input" onchange="aplicarFiltros()">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">Data Fim:</label>
                            <input type="date" id="filtro-data-fim" class="filter-input" onchange="aplicarFiltros()">
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">M√≠nimo de Jogadores:</label>
                            <select id="filtro-min-jogadores" class="filter-select">
                                <option value="">Todos</option>
                                <option value="10">10+</option>
                                <option value="15">15+</option>
                                <option value="20">20+</option>
                                <option value="25">25+</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <button class="filter-btn" onclick="aplicarFiltros()">
                                <span>üîç</span>
                                <span>Filtrar</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Lista de Peladas -->
                <div id="peladas-container" class="peladas-list">
                    <!-- Exemplo de pelada (ser√° populado via JavaScript) -->
                    <div class="pelada-card">
                        <div class="pelada-header">
                            <div class="pelada-date">
                                <span>üìÖ</span>
                                <span>15/08/2025</span>
                            </div>
                            <div class="pelada-count">
                                <span>üë• 22 jogadores</span>
                            </div>
                        </div>
                        
                        <div class="pelada-players">
                            <div class="players-label">Jogadores:</div>
                            <div class="players-list">
                                Jo√£o Silva, Pedro Santos, Carlos Oliveira, Ana Costa, Bruno Alves, Diego Ferreira, Eduardo Lima, Fernando Rocha, Gabriel Torres, Helena Martins, Igor Nascimento, Juliana Pereira, Kleber Souza, Luana Barbosa, Marcos Vieira, Nat√°lia Ramos, Ot√°vio Cardoso, Paula Mendes, Rafael Costa, Sofia Rodrigues, Thiago Nunes, Vanessa Castro
                            </div>
                        </div>

                        <div class="pelada-observations">
                            <div class="obs-label">Observa√ß√µes:</div>
                            <div class="obs-text">Pelada no campo do clube. In√≠cio √†s 14h. Levar √°gua e chuteira.</div>
                        </div>

                        <div class="pelada-actions">
                            <button class="action-btn btn-edit" onclick="editarPelada(123)">
                                <span>‚úèÔ∏è</span>
                                <span>Editar</span>
                            </button>
                            <button class="action-btn btn-delete" onclick="excluirPelada(123)">
                                <span>üóëÔ∏è</span>
                                <span>Excluir</span>
                            </button>
                        </div>
                    </div>

                    <!-- Estado vazio (quando n√£o h√° peladas) -->
                    <div id="empty-state" class="empty-state" style="display: none;">
                        <div class="empty-icon">üòî</div>
                        <div class="empty-title">Nenhuma pelada encontrada</div>
                        <div class="empty-text">
                            N√£o foram encontradas peladas com os filtros aplicados.<br>
                            Tente ajustar os crit√©rios de busca ou cadastre uma nova pelada.
                        </div>
                    </div>
                </div>

                <!-- Pagina√ß√£o -->
                <div class="paginacao">
                    <div class="paginacao-info">
                        Mostrando <span id="info-inicio">1</span> a <span id="info-fim">10</span> de <span id="info-total">45</span> peladas
                    </div>
                    <div class="paginacao-controles">
                        <button class="btn-pagina" id="btn-anterior" onclick="paginaAnterior()">‚Äπ Anterior</button>
                        <button class="btn-pagina active" onclick="irParaPagina(1)">1</button>
                        <button class="btn-pagina" onclick="irParaPagina(2)">2</button>
                        <button class="btn-pagina" onclick="irParaPagina(3)">3</button>
                        <button class="btn-pagina" onclick="irParaPagina(4)">4</button>
                        <button class="btn-pagina" onclick="irParaPagina(5)">5</button>
                        <button class="btn-pagina" id="btn-proximo" onclick="proximaPagina()">Pr√≥ximo ‚Ä∫</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <!-- 
        ORDEM DE CARREGAMENTO IMPORTANTE:
        1. Firebase - para autentica√ß√£o
        2. Supabase - biblioteca principal
        3. config.js - configura√ß√µes e inicializa√ß√£o do cliente
        4. admin-peladas.js - funcionalidades principais
    -->
    
    <!-- 1. Firebase - para verifica√ß√£o de autentica√ß√£o -->
    <script type="module" src="../js/firebase-config.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.8.1/firebase-auth.js"></script>
    
    <!-- 2. Supabase - deve ser carregado primeiro -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
    
    <!-- 3. Sistema de alerts personalizados -->
    <script src="../js/alert-manager.js"></script>
    
    <!-- 4. Configura√ß√µes e utilit√°rios -->
    <script src="../js/config.js"></script>
    
          <!-- 5. Scripts principais (aguardam DOM e Supabase) -->
      <script src="../js/admin-peladas.js"></script>
      
      <!-- 6. Gerenciador de autentica√ß√£o -->
    <script type="module" src="../js/auth-manager.js"></script>

    <script>
        // Adicionar mais part√≠culas dinamicamente
        function createParticles() {
            const container = document.querySelector('.floating-particles');
            for (let i = 0; i < 8; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = (Math.random() * 15 + 10) + 'px';
                particle.style.height = particle.style.width;
                particle.style.animationDelay = Math.random() * 6 + 's';
                container.appendChild(particle);
            }
        }

        // Anima√ß√£o suave para os campos de input
        document.querySelectorAll('.form-input').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });

        // Valida√ß√£o b√°sica do formul√°rio
        document.getElementById('pelada-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const data = document.getElementById('data-pelada').value;
            const jogadores = document.getElementById('lista-jogadores').value.trim();
            
            if (!data || !jogadores) {
                showWarning('Aten√ß√£o!', 'Por favor, preencha a data e a lista de jogadores!');
                return;
            }
            
            // Feedback de sucesso
            showSuccess('Formul√°rio v√°lido!', 'Agora clique em "Visualizar Lista" para continuar.');
        });

        // Criar part√≠culas ao carregar a p√°gina
        createParticles();

        // Fun√ß√µes do gerenciador est√£o implementadas no arquivo JavaScript

        // Fun√ß√£o aplicarFiltros est√° implementada no arquivo JavaScript

        // Fun√ß√£o editarPelada est√° implementada no arquivo JavaScript

        // Fun√ß√£o excluirPelada est√° implementada no arquivo JavaScript

        // Fun√ß√µes de pagina√ß√£o est√£o implementadas no arquivo JavaScript

        // Modal n√£o fecha ao clicar fora (removido para melhor UX)
    </script>
    
    <!-- Script para modo noturno -->
    <script src="../js/dynamic-favicon.js"></script>
    <script src="../js/dark-mode-logic.js"></script>
    <script src="../js/back-to-home.js"></script>
</body>
</html>